<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>DOM BOM 事件流 | 学习笔记</title>
    <meta name="description" content="Learning Docs by LIUeng" />
    <link rel="icon" href="/ent-docs/logo.ico">  <link rel="preload" href="/ent-docs/assets/css/0.styles.3bb58c56.css" as="style"><link rel="preload" href="/ent-docs/assets/js/app.cb8a79a7.js" as="script"><link rel="preload" href="/ent-docs/assets/js/2.791e7058.js" as="script"><link rel="preload" href="/ent-docs/assets/js/11.ad249abb.js" as="script"><link rel="prefetch" href="/ent-docs/assets/js/10.b7b4912c.js"><link rel="prefetch" href="/ent-docs/assets/js/12.abd76b24.js"><link rel="prefetch" href="/ent-docs/assets/js/13.f0a63076.js"><link rel="prefetch" href="/ent-docs/assets/js/14.f7ef194e.js"><link rel="prefetch" href="/ent-docs/assets/js/15.45b1c447.js"><link rel="prefetch" href="/ent-docs/assets/js/16.5c19fa88.js"><link rel="prefetch" href="/ent-docs/assets/js/17.86a9d73a.js"><link rel="prefetch" href="/ent-docs/assets/js/18.53ccf749.js"><link rel="prefetch" href="/ent-docs/assets/js/19.9c2d1b7d.js"><link rel="prefetch" href="/ent-docs/assets/js/20.ffcf0ee0.js"><link rel="prefetch" href="/ent-docs/assets/js/21.723e772d.js"><link rel="prefetch" href="/ent-docs/assets/js/22.a640b4a0.js"><link rel="prefetch" href="/ent-docs/assets/js/23.e78c27d6.js"><link rel="prefetch" href="/ent-docs/assets/js/24.c5f8d224.js"><link rel="prefetch" href="/ent-docs/assets/js/25.a085b9a6.js"><link rel="prefetch" href="/ent-docs/assets/js/26.0d935afd.js"><link rel="prefetch" href="/ent-docs/assets/js/27.796c68ea.js"><link rel="prefetch" href="/ent-docs/assets/js/28.164b28de.js"><link rel="prefetch" href="/ent-docs/assets/js/29.1422cf46.js"><link rel="prefetch" href="/ent-docs/assets/js/3.866f7336.js"><link rel="prefetch" href="/ent-docs/assets/js/30.03982151.js"><link rel="prefetch" href="/ent-docs/assets/js/31.6e3e11ca.js"><link rel="prefetch" href="/ent-docs/assets/js/32.e4b04cc4.js"><link rel="prefetch" href="/ent-docs/assets/js/33.5ef7eced.js"><link rel="prefetch" href="/ent-docs/assets/js/34.95595da8.js"><link rel="prefetch" href="/ent-docs/assets/js/35.3e0058c0.js"><link rel="prefetch" href="/ent-docs/assets/js/36.31028fba.js"><link rel="prefetch" href="/ent-docs/assets/js/37.64726b7b.js"><link rel="prefetch" href="/ent-docs/assets/js/38.959474fb.js"><link rel="prefetch" href="/ent-docs/assets/js/39.e425f96d.js"><link rel="prefetch" href="/ent-docs/assets/js/4.fb752034.js"><link rel="prefetch" href="/ent-docs/assets/js/40.f1f2b77e.js"><link rel="prefetch" href="/ent-docs/assets/js/41.8282be7f.js"><link rel="prefetch" href="/ent-docs/assets/js/42.84b96a74.js"><link rel="prefetch" href="/ent-docs/assets/js/43.cd743f60.js"><link rel="prefetch" href="/ent-docs/assets/js/44.2e47973a.js"><link rel="prefetch" href="/ent-docs/assets/js/45.dcb08d44.js"><link rel="prefetch" href="/ent-docs/assets/js/46.11e5d2b2.js"><link rel="prefetch" href="/ent-docs/assets/js/47.c8496480.js"><link rel="prefetch" href="/ent-docs/assets/js/48.9ce9e906.js"><link rel="prefetch" href="/ent-docs/assets/js/49.ced280bb.js"><link rel="prefetch" href="/ent-docs/assets/js/5.d1b68b9b.js"><link rel="prefetch" href="/ent-docs/assets/js/50.af9c2be8.js"><link rel="prefetch" href="/ent-docs/assets/js/6.4156ec29.js"><link rel="prefetch" href="/ent-docs/assets/js/7.0812bd3b.js"><link rel="prefetch" href="/ent-docs/assets/js/8.aff490b4.js"><link rel="prefetch" href="/ent-docs/assets/js/9.e72fba2b.js"> <link rel="stylesheet" href="/ent-docs/assets/css/0.styles.3bb58c56.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ent-docs/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ent-docs/just-do-it/" class="nav-link">笔记</a></div><div class="nav-item"><a href="/ent-docs/article/" class="nav-link router-link-active">我的文章</a></div><div class="nav-item"><a href="/ent-docs/bigfish/" class="nav-link">Bigfish</a></div><div class="nav-item"><a href="/ent-docs/alogrithm/" class="nav-link">数据结构与算法</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="source code" class="dropdown-title"><span class="title">源码阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ent-docs/source-code/react/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/ent-docs/source-code/vue/" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><a href="/ent-docs/markdown/" class="nav-link">EDIT</a></div><div class="nav-item"><a href="https://www.github.com/LIUeng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ent-docs/just-do-it/" class="nav-link">笔记</a></div><div class="nav-item"><a href="/ent-docs/article/" class="nav-link router-link-active">我的文章</a></div><div class="nav-item"><a href="/ent-docs/bigfish/" class="nav-link">Bigfish</a></div><div class="nav-item"><a href="/ent-docs/alogrithm/" class="nav-link">数据结构与算法</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="source code" class="dropdown-title"><span class="title">源码阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ent-docs/source-code/react/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/ent-docs/source-code/vue/" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><a href="/ent-docs/markdown/" class="nav-link">EDIT</a></div><div class="nav-item"><a href="https://www.github.com/LIUeng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>我的文章</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ent-docs/article/" class="sidebar-link">简介</a></li><li><a href="/ent-docs/article/git.html" class="sidebar-link">GIT</a></li><li><a href="/ent-docs/article/eslint.html" class="sidebar-link">ESLint</a></li><li><a href="/ent-docs/article/typescript.html" class="sidebar-link">Typescript 基础</a></li><li><a href="/ent-docs/article/docs.html" class="sidebar-link">前端文档</a></li><li><a href="/ent-docs/article/history.html" class="sidebar-link">History API</a></li><li><a href="/ent-docs/article/scriptLink.html" class="sidebar-link">Script Link 标签</a></li><li><a href="/ent-docs/article/ecs.html" class="sidebar-link">云服务器ECS</a></li><li><a href="/ent-docs/article/transitionAnimation.html" class="sidebar-link">CSSJS动画那些事</a></li><li><a href="/ent-docs/article/mutationObserver.html" class="sidebar-link">MutationObserver</a></li><li><a href="/ent-docs/article/devServer.html" class="sidebar-link">实现一个简易热更新</a></li><li><a href="/ent-docs/article/virtualList.html" class="sidebar-link">PC虚拟列表如何处理</a></li><li><a href="/ent-docs/article/domEvents.html" class="active sidebar-link">DOM BOM 事件流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ent-docs/article/domEvents.html#事件冒泡" class="sidebar-link">事件冒泡</a></li><li class="sidebar-sub-header"><a href="/ent-docs/article/domEvents.html#事件捕获" class="sidebar-link">事件捕获</a></li><li class="sidebar-sub-header"><a href="/ent-docs/article/domEvents.html#事件处理程序" class="sidebar-link">事件处理程序</a></li><li class="sidebar-sub-header"><a href="/ent-docs/article/domEvents.html#事件对象" class="sidebar-link">事件对象</a></li><li class="sidebar-sub-header"><a href="/ent-docs/article/domEvents.html#事件对象-2" class="sidebar-link">事件对象</a></li></ul></li><li><a href="/ent-docs/article/htmlWebpackPlugin.html" class="sidebar-link">HtmlWepbackPlugin 源码分析</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dom-bom-事件流"><a href="#dom-bom-事件流" class="header-anchor">#</a> DOM BOM 事件流</h1> <p>兼容性：IE9、Opera、Firefox、Chrome 和 Safari 支持 DOM 事件流</p> <h2 id="事件冒泡"><a href="#事件冒泡" class="header-anchor">#</a> 事件冒泡</h2> <p>事件开始时由最具体的元素（文档中嵌套层次最深的那个节点）接收，逐级向上传播到较为不具体的节点（文档 document）</p> <h2 id="事件捕获"><a href="#事件捕获" class="header-anchor">#</a> 事件捕获</h2> <p>document 文档接收到事件，然后逐级向下传播的到最具体元素接收事件</p> <h2 id="事件处理程序"><a href="#事件处理程序" class="header-anchor">#</a> 事件处理程序</h2> <h3 id="html-事件处理程序"><a href="#html-事件处理程序" class="header-anchor">#</a> HTML 事件处理程序</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>alert('HELLO')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="dom0-级事件处理程序"><a href="#dom0-级事件处理程序" class="header-anchor">#</a> DOM0 级事件处理程序</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'HELLO'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="dom2-级事件处理程序"><a href="#dom2-级事件处理程序" class="header-anchor">#</a> DOM2 级事件处理程序</h3> <p>兼容性：IE9、Firefox、Safari、Chrome 和 Opera</p> <ul><li>addEventListener</li></ul> <p>绑定多个相同的事件，按先后顺序执行</p> <p>接收三个参数：要处理的事件名、要处理的事件名函数、bool 值（true: 表示在捕获阶段调用事件处理程序；false: 表示在冒泡阶段调用事件处理程序）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>removeEventListener</li></ul> <p>参数相同，三个参数必须一样（注意：事件名处理的函数参数必须一致，否则无效）</p> <h3 id="ie-事件处理程序"><a href="#ie-事件处理程序" class="header-anchor">#</a> IE 事件处理程序</h3> <ul><li>attachEvent &amp; detachEvent</li></ul> <p>绑定多个相同的事件，倒序执行</p> <p>接收两个参数，事件处理程序名称和事件处理程序函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// on + click</span>
app<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 事件处理程序会在全局作用域内执行</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> window<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="事件对象"><a href="#事件对象" class="header-anchor">#</a> 事件对象</h2> <h3 id="dom-事件对象"><a href="#dom-事件对象" class="header-anchor">#</a> DOM 事件对象</h3> <blockquote><p>只有在事件处理程序执行期间，event 对象才会存在；一旦事件处理程序执行完成，event 对象就会被销毁</p></blockquote> <ul><li>事件函数处理内部，对象 this 始终等于 currentTarget 的值，而 target 只包含事件的目标</li></ul> <table><thead><tr><th>属性/方法</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>bubbles</td> <td>Boolean</td> <td>事件是否冒泡</td></tr> <tr><td>cancelable</td> <td>Boolean</td> <td>是否可以取消事件的默认行为</td></tr> <tr><td>currentTarget</td> <td>Element</td> <td>当前正在处理事件的元素</td></tr> <tr><td>defaultPrevented</td> <td>Boolean</td> <td>true: 表示已经调用了 preventDefault()</td></tr> <tr><td>detail</td> <td>Interger</td> <td>与事件相关的细节信息</td></tr> <tr><td>eventPhase</td> <td>Interger</td> <td>调用事件处理程序的阶段：1. 捕获 2. 目标 3. 冒泡</td></tr> <tr><td>preventDefault</td> <td>Function</td> <td>取消事件的默认行为，cancelable 为 true 时可调用</td></tr> <tr><td>stopImmediatePropagation</td> <td>Function</td> <td>取消事件的进一步冒泡或捕获，同时阻止任何事件处理程序被调用</td></tr> <tr><td>stopPropagation</td> <td>Function</td> <td>取消事件的冒泡行为</td></tr> <tr><td>target</td> <td>Element</td> <td>事件目标元素</td></tr> <tr><td>trusted</td> <td>Boolean</td> <td>true 浏览器生成的事件；false 表示人为因素</td></tr> <tr><td>type</td> <td>String</td> <td>事件类型</td></tr> <tr><td>view</td> <td>AbstractView</td> <td>与事件关联的抽象视图，window 对象</td></tr></tbody></table> <h3 id="ie-事件对象"><a href="#ie-事件对象" class="header-anchor">#</a> IE 事件对象</h3> <ul><li>IE 事件对象中，event = event || window.event</li> <li>IE 事件处理函数中 this 指向不能认为始终等于事件目标 event.srcElement,</li></ul> <table><thead><tr><th>属性/方法</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>cancelBubble</td> <td>Boolean</td> <td>取消事件冒泡</td></tr> <tr><td>returnValue</td> <td>Boolean</td> <td>取消事件的默认行为</td></tr> <tr><td>srcElement</td> <td>Element</td> <td>事件的目标</td></tr> <tr><td>type</td> <td>String</td> <td>事件的类型</td></tr></tbody></table> <h2 id="事件对象-2"><a href="#事件对象-2" class="header-anchor">#</a> 事件对象</h2> <blockquote><p>判断是否支持DOM2或者DOM3事件</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// HTMLEvents 2.0 | UIEvents 3.0 | FocusEvent 3.0 | MouseEvent 2.0 3.0</span>
<span class="token comment">// DOM2</span>
<span class="token keyword">const</span> isSupported <span class="token operator">=</span> document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">hasFeature</span><span class="token punctuation">(</span><span class="token string">'HTMLEvents'</span><span class="token punctuation">,</span> <span class="token string">'2.0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// DOM3</span>
<span class="token keyword">const</span> isSupported <span class="token operator">=</span> document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">hasFeature</span><span class="token punctuation">(</span><span class="token string">'UIEvents'</span><span class="token punctuation">,</span> <span class="token string">'3.0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ui事件"><a href="#ui事件" class="header-anchor">#</a> UI事件</h3> <ul><li>DOMActivate 表示元素已经被用户操作（鼠标和键盘）激活；DOM3级事件中已经移除</li> <li>load</li></ul> <ol><li>页面完全加载(包含图像文件，js文件，css文件等外部资源)触发: window/document</li> <li>图像下载完毕触发: img</li> <li>嵌入的内容触发：link(style) script</li></ol> <ul><li>unload 页面完全卸载或者嵌入的内容完全卸载 window/document</li> <li>abort 用户停止下载过程时，如果嵌入的内容没有加载完触发</li> <li>error 触发条件：window link script</li> <li>select 用户选择input或者textarea字符时触发</li> <li>resize 窗口或者框架的大小变化时触发（compatMode 混杂模式 document.documentElement)</li> <li>scroll 滚动元素触发</li></ul> <h3 id="焦点事件"><a href="#焦点事件" class="header-anchor">#</a> 焦点事件</h3> <ul><li>blur 失去焦点时触发，不冒泡(支持捕获)</li> <li>DOMFocusIn 元素获得焦点时触发，冒泡，DOM3遗弃</li> <li>DOMFocusOut 元素失去焦点时触发，冒泡，DOM3遗弃</li> <li>focus 元素获取焦点时触发，不冒泡(支持捕获)</li> <li>focusin 元素获取焦点时触发，冒泡，兼容性：IE5.5+、Safari 5.1+、Opera 11.5+和 Chrome</li> <li>focusout 元素失去焦点时触发，冒泡，兼容性：IE5.5+、Safari 5.1+、Opera 11.5+和 Chrome</li></ul> <blockquote><p>当焦点从页面中的一个元素移动到另一个元素，触发顺序</p></blockquote> <p><code>focusout, focusin, blur, DOMFocusOut, focus, DOMFocusIn</code></p> <h3 id="鼠标与滚轮事件"><a href="#鼠标与滚轮事件" class="header-anchor">#</a> 鼠标与滚轮事件</h3> <ul><li>click 单击鼠标按钮（左边按钮）或者enter</li> <li>dbclick 双击鼠标按钮</li> <li>mousedown 任意鼠标按钮</li> <li>mouseenter 鼠标移动从元素外部首次移动到元素范围之内触发（后代子元素不会触发），不冒泡</li> <li>mouseleave 鼠标从元素内部移动到外部触发（后代元素不会触发），不冒泡</li> <li>mousemove 鼠标在元素内部移动触发</li> <li>mouseout 元素移入另一个元素触发</li> <li>mouseover 元素外部移入元素边界之内</li> <li>mouseup 释放鼠标</li></ul> <blockquote><p>点击两次触发顺序</p></blockquote> <p><code>mousedown, mouseup, click, mousedown, mouseup, click, dblclick</code></p> <p><code>客户区坐标位置</code></p> <p>clientX, clientY 不包含滚动距离（视口中x, y距离）</p> <p>pageX, pageY 包含滚动距离（鼠标光标在页面中的位置）</p> <p>screenX, screenY 相对屏幕（电脑桌面）位置</p> <p><code>热键</code></p> <p>shiftKey、ctrlKey、altKey 和 metaKey（IE8及之前版本都不支持）</p> <p><code>鼠标按钮</code></p> <p>button =&gt; 0 没按下 | 1 主鼠标按钮 | 2 次鼠标按钮 | 3 同时主次 | 4 中间 | 5 主中 | 6 中次 | 7 主中次</p> <p><code>detail信息</code></p> <p>event.detail 计数（事件在某一个元素触发多少次 1开始）</p> <p><code>鼠标滚轮事件</code></p> <p>mousewheel, DOMMouseScroll（firefox)</p> <h3 id="键盘与文本事件"><a href="#键盘与文本事件" class="header-anchor">#</a> 键盘与文本事件</h3> <p>DOM3级（所有元素都支持，文本框输入文本时最长用到，支持热键）</p> <ul><li>keydown 用户按下任意键触发，按住不放时，重复触发</li> <li>keypress用户按下任意键触发，按住不放时，重复触发</li> <li>keyup 释放键触发</li></ul> <blockquote><p>按下字符键触发顺序: keypress keydown keyup
按下非字符键触发顺序：keydown keyup</p></blockquote> <p><code>键码</code></p> <p>keypress 时间获取键码 =&gt; event =&gt; charCode || keyCode(ASCII码) =&gt; String.fromCharCode 转为实际字符</p> <p><code>event.location(什么位置上的键)</code></p> <p>0表示默认键盘 | 1表示左侧键盘 | 2表示右侧键盘 | 3表示数字小键盘 | 4表示移动设备键盘 | 5表示手柄</p> <ul><li>textInput</li></ul> <p><code>textInput VS keypress（两大区别）</code></p> <blockquote><ol><li>任何获得焦点的元素都能触发keypress事件，但只有编辑区域才能触发textInput事件</li> <li>textInput输入实际字符的键时会触发，keypress按下能够影响文本显示的键</li></ol></blockquote> <p><code>event.inputMethod</code></p> <p>0不确定输入 | 1键盘输入 | 2粘贴进来 | 3拖放进来 | 4使用IME输入 | 5表单中选择某一项输入 | 6手写输入 | 7语音输入 | 8组合输入 | 9脚本输入</p> <h3 id="复合事件"><a href="#复合事件" class="header-anchor">#</a> 复合事件</h3> <p>DOM3级 用于处理IME的输入序列</p> <ul><li>compositionstart 开始输入</li> <li>compositionupdate 输入字段中插入新字符</li> <li>compositionend 关闭时触发</li></ul> <h3 id="变动事件"><a href="#变动事件" class="header-anchor">#</a> 变动事件</h3> <p>DOM发生变化时给出提示 =&gt; mutation</p> <ul><li>DOMSubtreeModified DOM结构发生任何变化</li> <li>DOMNodeInserted 一个结点作为子节点插入到另一节点时触发</li> <li>DOMNodeRemoved 在节点从其父节点移除时触发</li> <li>DOMNodeInsertedIntoDocument 插入文档或之后触发（DOMNodeInserted之后触发）</li> <li>DOMNodeRemovedFromDocument 从文档中移除之后触发（DOMNodeRemoved之后触发）</li> <li>DOMAttrModified 属性修改之后触发</li> <li>DOMCharacterDataModified 在文本节点的值改变之后触发</li></ul> <ol><li><code>删除节点</code> =&gt; replaceChild | removeChild</li> <li><code>插入节点</code> =&gt; appendChild | replaceChild | insertBefore</li></ol> <h3 id="html5事件"><a href="#html5事件" class="header-anchor">#</a> HTML5事件</h3> <ul><li>contextmenu 单击鼠标右键调出上下文菜单</li></ul> <p>事件是冒泡的 =&gt; 阻止默认行为 event.preventDefault() | event.returnValue = false;</p> <ul><li>beforeunload 页面卸载前阻止这一操作</li></ul> <p>显示的窗口的值：event.returnValue = 'message';</p> <ul><li>DOMContentLoaded 形成完整的DOM树之后触发（document | window）</li></ul> <p>不用等图像、JavaScript文件、CSS文件下载完毕</p> <ul><li>readystatechange</li></ul> <p>提供与文档或者元素加载状态有关的信息（5个状态）(event.target.readyState)</p> <ol><li>uninitialized(对象存在单尚未初始化)</li> <li>loading(对象正在加载数据)</li> <li>loaded(对象加载数据完毕)</li> <li>interactive(可以操作对象，还没完全加载)</li> <li>complete(对象已经加载完毕)</li></ol> <h3 id="pageshow-和-pagehide-事件"><a href="#pageshow-和-pagehide-事件" class="header-anchor">#</a> pageshow 和 pagehide 事件</h3> <p>Firefox Opera =&gt; bfcache(back-forward cache)</p> <ol><li>保存页面的状态</li> <li>不会触发load事件</li> <li>event对象上有个persist属性 =&gt; true</li> <li>指定了unload事件处理程序的页面会被排除在bfcache之外</li></ol> <h3 id="hashchange"><a href="#hashchange" class="header-anchor">#</a> hashchange</h3> <p><strong>判断兼容性 稳妥</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// IE8 文档在 IE7 下运行</span>
<span class="token keyword">var</span> isSupported <span class="token operator">=</span> <span class="token string">'onhashchange'</span> <span class="token keyword">in</span> windwo <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentMode <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> document<span class="token punctuation">.</span>documentMode <span class="token operator">&gt;</span> <span class="token number">7</span><span class="token punctuation">)</span>
</code></pre></div><p>URL 的参数列表（及 URL 中“#”号后面的所有字符串）(window 对象)</p> <ol><li>event包含两个属性 oldURL newURL</li> <li>使用location.hash获取url hash字符串（#后面的字符串）</li></ol> <h3 id="设备事件"><a href="#设备事件" class="header-anchor">#</a> 设备事件</h3> <ul><li>orientationchange</li></ul> <p>window.orientation =&gt; 0肖像模式 90左旋转的横向模式 -90右旋转的横向模式</p> <ul><li>MozOrientation 检测到方向变化触发此事件（加速计支持）</li> <li>deviceorientation window对象触发（加速计支持）</li> <li>devicemotion 不仅仅是设备方向改变，告诉开发人员设备什么时候开始移动（行走 掉下）</li></ul> <h3 id="触摸与手势事件"><a href="#触摸与手势事件" class="header-anchor">#</a> 触摸与手势事件</h3> <ol><li>触摸事件</li></ol> <ul><li>touchstart</li> <li>touchmove</li> <li>touchend</li> <li>touchcancel</li></ul> <p>顺序（包括鼠标）=&gt; touchstart mouseover mousemove（一次） mousedown mouseup click touchend</p> <ol start="2"><li>手势事件</li></ol> <ul><li>gensturestart</li> <li>gensturechange</li> <li>genstureend</li></ul> <p>event 对象 =&gt; 标准的鼠标事件 + rotation(0开始 负值表示逆时针旋转 正值表示顺时针旋转) + scale(1开始 两个手指距离变化)</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2020-6-21 23:54:56</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ent-docs/article/virtualList.html" class="prev">PC虚拟列表如何处理</a></span> <span class="next"><a href="/ent-docs/article/htmlWebpackPlugin.html">HtmlWepbackPlugin 源码分析</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/ent-docs/assets/js/app.cb8a79a7.js" defer></script><script src="/ent-docs/assets/js/2.791e7058.js" defer></script><script src="/ent-docs/assets/js/11.ad249abb.js" defer></script>

    <!-- Google Analytics -->
    <script>
      window.ga =
        window.ga ||
        function() {
          (ga.q = ga.q || []).push(arguments);
        };
      ga.l = +new Date();
      ga('create', 'UA-156116652-1', 'auto');
      ga('send', 'pageview');
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>
    <!-- End Google Analytics -->
  </body>
</html>
